/*!
 * console.js 0.1.2
 * http://evilmarty.github.com/consolejs/
 *
 * Copyright 2011, Marty Zalega
 * Under the MIT license.
 * http://www.opensource.org/licenses/MIT
 */
(function(){function f(a,b){var c=document.createElement(a);if(b)for(var d in b)c.setAttribute(d,b[d]);for(d=2;d<arguments.length;++d)c.appendChild(arguments[d]);return c}function i(a,b){if(typeof a==="string"||typeof a==="number")return document.createTextNode(a);a.appendChild(document.createTextNode(b));return a}function q(a){for(var b=[],c=1;c<arguments.length;++c)b=b.concat(arguments[c].split(/\s+/));if(a.classList)for(c in b)a.classList.add(b[c]);else b=a.className.split(/\s+/)+b,a.className=
b.join(" ");return a}function m(a,b,c){var d="on"+b;if(a.addEventListener)return a.addEventListener(b,c,false);else if(a.attachEvent)return a.attachEvent(d,c);else if(d in a)return a[d]=c}function r(a){for(var b=1;b<arguments.length;++b){var c=arguments[b],d;for(d in c)a[d]=c[d]}return a}function s(a){return Object.prototype.toString.call(a)==="[object Array]"?"array":Object.prototype.toString.call(a)==="[object Error]"?"error":a===null?"null":typeof a}function h(a,b){var c=s(a);switch(c){case "null":case "undefined":return f("span",
{"class":c},i(c));case "array":var d=f("ol",{"class":c}),e;for(e in a)c=a[e],d.appendChild(f("li",null,h(c)));return d;case "object":e=f("dl",{"class":c});for(d in a)d in a.__proto__||(c=b===false?i(d):h(a[d],false),e.appendChild(f("dt",null,i(d))),e.appendChild(f("dd",null,c)));return e;default:return f("span",{"class":c},i(a.toString()))}}var t={},u=function(){var a=-1,b=[];return r(this,{clear:function(){b=[]},reset:function(){a=b.length},previous:function(){return b[a=Math.max(--a,0)]},next:function(){return b[a=
Math.min(++a,b.length)]},push:function(a){b[b.length-1]!==a&&(b.push(a),this.reset())}})},n=function(a,b){function c(a){var b=arguments.length===2?arguments[1]:Array.prototype.slice.call(arguments,1),c=f("div",{"class":"result"},h(b)),b=q(f("p",null,c),s(b),a);j.insertBefore(b,k);return b}function d(a){if(a){var d=i(f("div",{"class":"command"}),a),e="info",g;try{g=function(){with(b)return eval(a)}.call(b)}catch(h){g=h,e="error"}e=c(e,g);e.insertBefore(d,e.childNodes[0]);e.scrollTop=e.scrollHeight;
j.scrollTop=j.scrollHeight;l.push(a)}}typeof a=="string"&&(a=document.getElementById(a));var e=t[a];if(e)return e.cd(b),e;else if(!(this instanceof n))return e||(e=new n(a,b)),e;t[a]=this;b||(b=window);for(var o=f("div");node=a.childNodes[0];)o.appendChild(node);var j=f("div",{"class":"console-container"}),k=f("p",{"class":"console-input"}),g=f("textarea",{row:1}),p={className:a.className,tabIndex:a.tabIndex};k.appendChild(g);j.appendChild(k);q(a,"console").appendChild(j);if(a.tabIndex<0)a.tabIndex=
0;m(a,"focus",function(){g.focus()});var l=new u;m(g,"keydown",function(a){switch(a.keyCode){case 13:return a.preventDefault(),d(this.value),this.value="",false;case 38:if(cmd=l.previous())g.value=cmd;a.preventDefault();return false;case 40:return g.value=(cmd=l.next())?cmd:"",a.preventDefault(),false}});m(g,"blur",function(){l.reset()});return r(this,{cd:function(a){b=a},log:function(){var a=Array.prototype.slice.call(arguments);a.unshift("info");c.apply(this,a)},info:function(){var a=Array.prototype.slice.call(arguments);
a.unshift("info");c.apply(this,a)},warn:function(){var a=Array.prototype.slice.call(arguments);a.unshift("warn");c.apply(this,a)},error:function(){var a=Array.prototype.slice.call(arguments);a.unshift("error");c.apply(this,a)},clear:function(){for(var a=k.previousSibling;a;){var b=a,a=b.previousSibling;b.parentNode.removeChild(b)}},destroy:function(){for(var b in p)a[b]=p[b];for(;node=a.childNodes[0];)a.removeChild(node);for(;node=o.childNodes[0];)a.appendChild(node);delete o;delete h;delete g;delete p}})};
window.Console=n})();
