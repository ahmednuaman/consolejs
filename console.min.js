/*!
 * console.js 0.1.1
 * http://evilmarty.github.com/consolejs/
 *
 * Copyright 2011, Marty Zalega
 * Under the MIT license.
 * http://www.opensource.org/licenses/MIT
 */
(function(){function f(a,b){var c=document.createElement(a);if(b)for(var d in b)c.setAttribute(d,b[d]);for(d=2;d<arguments.length;++d)c.appendChild(arguments[d]);return c}function i(a,b){if(typeof a==="string"||typeof a==="number")return document.createTextNode(a);a.appendChild(document.createTextNode(b));return a}function p(a){for(var b=[],c=1;c<arguments.length;++c)b=b.concat(arguments[c].split(/\s+/));if(a.classList)for(c in b)a.classList.add(b[c]);else b=a.className.split(/\s+/)+b,a.className=
b.join(" ");return a}function n(a,b,c){var d="on"+b;if(a.addEventListener)return a.addEventListener(b,c,false);else if(a.attachEvent)return a.attachEvent(d,c);else if(d in a)return a[d]=c}function q(a){for(var b=1;b<arguments.length;++b){var c=arguments[b],d;for(d in c)a[d]=c[d]}return a}function r(a){return Object.prototype.toString.call(a)==="[object Array]"?"array":Object.prototype.toString.call(a)==="[object Error]"?"error":a===null?"null":typeof a}function k(a,b){var c=r(a);switch(c){case "null":case "undefined":return f("span",
{"class":c},i(c));case "array":var d=f("ol",{"class":c}),e;for(e in a)c=a[e],d.appendChild(f("li",null,k(c)));return d;case "object":e=f("dl",{"class":c});for(d in a)d in a.__proto__||(c=b===false?i(d):k(a[d],false),e.appendChild(f("dt",null,i(d))),e.appendChild(f("dd",null,c)));return e;default:return f("span",{"class":c},i(a.toString()))}}var h={},t=function(){var a=-1,b=[];return q(this,{clear:function(){b=[]},reset:function(){a=b.length},previous:function(){return b[a=Math.max(--a,0)]},next:function(){return b[a=
Math.min(++a,b.length)]},push:function(a){b[b.length-1]!==a&&(b.push(a),this.reset())}})},s=function(a,b){function c(){for(var a=l.previousSibling;a;){var b=a,a=b.previousSibling;b.parentNode.removeChild(b)}}function d(a){var b=arguments.length===2?arguments[1]:Array.prototype.slice.call(arguments,1),c=f("div",{"class":"result"},k(b)),b=p(f("p",null,c),r(b),a);j.insertBefore(b,l);return b}function e(a){if(a){var c=i(f("div",{"class":"command"}),a),e="info",g;try{g=function(){with(b)return eval(a)}.call(b)}catch(h){g=
h,e="error"}e=d(e,g);e.insertBefore(c,e.childNodes[0]);e.scrollTop=e.scrollHeight;j.scrollTop=j.scrollHeight;m.push(a)}}for(var o=f("div");node=a.childNodes[0];)o.appendChild(node);var j=f("div",{"class":"console-container"}),l=f("p",{"class":"console-input"}),g=f("textarea",{row:1});l.appendChild(g);j.appendChild(l);p(a,"console").appendChild(j);var m=new t;n(g,"keydown",function(a){switch(a.keyCode){case 13:return a.preventDefault(),e(this.value),this.value="",false;case 38:if(cmd=m.previous())g.value=
cmd;a.preventDefault();return false;case 40:return g.value=(cmd=m.next())?cmd:"",a.preventDefault(),false}});n(g,"blur",function(){m.reset()});b||(b=window);var h=a.tabIndex;if(a.tabIndex<0)a.tabIndex=0;n(a,"focus",function(){g.focus()});return new function(){return q(this,{cd:function(a){b=a},log:function(){var a=Array.prototype.slice.call(arguments);a.unshift("info");d.apply(this,a)},info:function(){var a=Array.prototype.slice.call(arguments);a.unshift("info");d.apply(this,a)},warn:function(){var a=
Array.prototype.slice.call(arguments);a.unshift("warn");d.apply(this,a)},error:function(){var a=Array.prototype.slice.call(arguments);a.unshift("error");d.apply(this,a)},clear:c,destroy:function(){for(a.tabIndex=h;node=a.childNodes[0];)a.removeChild(node);for(;node=o.childNodes[0];)a.appendChild(node);delete o;delete k;delete g;delete h}})}};window.Console=function(a,b){typeof a=="string"&&(a=document.getElementById(a));var c=h[a];this instanceof s||!c?(c&&(c.destroy(),delete c),h[a]=c=new s(a,b)):
b&&c.cd(b);return c}})();
